Version: '0.1'
Environment:
  Name: Butterflies
  Description: >
    You want to catch all of the butterflies while also avoiding the spiders.
    Butterflies spawn slowly from cocoons.

    The butterflies are also eaten by the spiders so you need to be fast to
    collect them.

    You win the level as soon as there are no butterflies on the screen.
  Observers:
    Sprite2D:
      TileSize: 24
      BackgroundTile: gvgai/oryx/backBiege.png
  Player:
    AvatarObject: catcher
  Termination:
    Win:
      - eq:
          - butterfly:count
          - 0
    Lose:
      - eq:
          - _steps
          - 250
  Levels:
    - >
      w   w   w   w   w   w   w   w   w   w   w   w   w   w   w   w   w   w  
      w   w   w   w   w   w   w   w   w   w   

      w   .   .   1   .   .   .   .   .   1   .   .   w   .   .   .   .   .  
      .   .   0   .   .   w   .   .   .   w   

      w   .   1   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .  
      .   .   .   .   .   w   .   .   0   w   

      w   .   .   .   1   .   .   .   0   .   .   .   .   .   A   .   .   .  
      .   .   .   .   .   w   .   .   .   w   

      w   w   w   w   w   w   w   w   w   w   w   w   .   .   .   .   .   .  
      .   .   .   .   .   .   .   .   .   w   

      w   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .   .  
      .   .   w   .   .   .   .   .   w   w   

      w   .   .   .   .   .   .   .   1   .   .   .   .   .   .   .   .   .  
      .   .   .   .   .   .   .   .   .   w   

      w   .   .   .   .   .   .   .   .   .   .   w   w   w   w   w   .   .  
      .   .   1   .   .   .   .   .   .   w   

      w   w   w   w   w   .   .   .   .   .   .   .   .   .   .   .   .   .  
      .   .   .   w   .   .   .   .   .   w   

      w   .   .   .   .   .   0   .   .   .   .   .   .   .   .   .   .   .  
      .   .   .   w   0   .   .   .   .   w   

      w   w   w   w   w   w   w   w   w   w   w   w   w   w   w   w   w   w  
      w   w   w   w   w   w   w   w   w   w
Actions:
  - Name: spawn_butterfly
    InputMapping:
      Internal: true
    Behaviours:
      - Src:
          Object: cocoon
          Commands:
            - spawn: butterfly
            - exec:
                Action: spawn_butterfly
                Delay: 50
                Randomize: true
        Dst:
          Object: _empty
      - Src:
          Object: cocoon
          Commands:
            - exec:
                Action: spawn_butterfly
                Delay: 100
                Randomize: true
        Dst:
          Object:
            - cocoon
            - butterfly
            - catcher
            - wall
  - Name: butterfly_random_movement
    InputMapping:
      Internal: true
    Behaviours:
      - Src:
          Object: butterfly
          Commands:
            - mov: _dest
            - exec:
                Action: butterfly_random_movement
                Delay: 3
                Randomize: true
        Dst:
          Object: _empty
      - Src:
          Object: butterfly
          Commands:
            - exec:
                Action: butterfly_random_movement
                Delay: 3
                Randomize: true
        Dst:
          Object:
            - wall
            - catcher
            - butterfly
            - cocoon
  - Name: move
    Behaviours:
      - Src:
          Object: catcher
          Commands:
            - mov: _dest
        Dst:
          Object: _empty
      - Src:
          Object: catcher
          Commands:
            - mov: _dest
            - reward: 1
        Dst:
          Object: butterfly
          Commands:
            - remove: true
Objects:
  - Name: wall
    MapCharacter: w
    Observers:
      Sprite2D:
        - TilingMode: WALL_16
          Image:
            - oryx/oryx_fantasy/wall8-0.png
            - oryx/oryx_fantasy/wall8-1.png
            - oryx/oryx_fantasy/wall8-2.png
            - oryx/oryx_fantasy/wall8-3.png
            - oryx/oryx_fantasy/wall8-4.png
            - oryx/oryx_fantasy/wall8-5.png
            - oryx/oryx_fantasy/wall8-6.png
            - oryx/oryx_fantasy/wall8-7.png
            - oryx/oryx_fantasy/wall8-8.png
            - oryx/oryx_fantasy/wall8-9.png
            - oryx/oryx_fantasy/wall8-10.png
            - oryx/oryx_fantasy/wall8-11.png
            - oryx/oryx_fantasy/wall8-12.png
            - oryx/oryx_fantasy/wall8-13.png
            - oryx/oryx_fantasy/wall8-14.png
            - oryx/oryx_fantasy/wall8-15.png
  - Name: butterfly
    InitialActions:
      - Action: butterfly_random_movement
        Delay: 3
        Randomize: true
    MapCharacter: '1'
    Observers:
      Sprite2D:
        - Image: gvgai/newset/butterfly1.png
  - Name: cocoon
    MapCharacter: '0'
    InitialActions:
      - Action: spawn_butterfly
        Delay: 50
        Randomize: true
    Observers:
      Sprite2D:
        - Image: gvgai/newset/cocoonb1.png
  - Name: catcher
    MapCharacter: A
    Observers:
      Sprite2D:
        - Image: gvgai/newset/girl1.png
